FROM centos:7

LABEL name="DCI TOX" version="0.0.1"
MAINTAINER DCI Team <distributed-ci@redhat.com>

RUN yum install -y epel-release && yum clean all
RUN yum install -y gcc libpqxx-devel libffi-devel \
    python-devel git python3-devel redhat-rpm-config \
    python-lxml libxslt-devel python-pip python34-setuptools && \
    yum clean all && \
    pip install tox

RUN easy_install-3.4 -U pip

ENV LANG "en_US.UTF-8"
ENV DISABLE_DB_START 1
ENV DISABLE_ES_START 1
ENV DISABLE_INFLUXDB_START 1

ENV TOX_TESTENV_PASSENV "DB_PORT ES_PORT"
ENV DCI_SETTINGS_FILE /tmp/settings/settings_test.py

WORKDIR /opt

CMD ["/bin/bash"]
