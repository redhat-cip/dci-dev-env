FROM fedora:26

LABEL name="DCI DOC" version="0.0.2"
MAINTAINER DCI Team <distributed-ci@redhat.com>

RUN dnf -y --setopt=tsflags=nodocs install \
    https://repos.fedorapeople.org/repos/openstack/openstack-ocata/rdo-release-ocata-2.noarch.rpm \
    https://packages.distributed-ci.io/dci-release.fc26.noarch.rpm && \
    dnf -y --setopt=tsflags=nodocs install \
    make python2-dciclient \
    python-sphinxcontrib-httpdomain python-sphinx_rtd_theme python-sphinx && \
    dnf clean all

ADD dci-doc/python-dciclient python-dciclient

WORKDIR /opt/dci-doc

# By default build the html version of the docs.
CMD ["make", "html"]
